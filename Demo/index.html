<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="jquery-3.1.0.min.js"></script>
    <script src="../src/jquery.vpage.js"></script>
    <style>
        .item {
            display: inline-block;
            border: 1px solid #FFE7E7;
            text-decoration: none;
            color: black;
            font-family: "微軟正黑體";
            padding: 10px 30px;
        }
    </style>
<script>
$(function (){

    function _bg_color(selector)
    {
        $(".item").removeAttr("style");
        $(selector).css("background", "#FC5A5A"); 
        $(selector).css("color", "white"); 
    }

    $(".item").vpage({
        name: 'button',
        event: 'click',
        state:{a:1},
        prepare: function (){

            // 動態變換網址
            var type = $(this).attr("data-type");
            $.vpage.set("button", "url", "?onload=button&type="+type);

        },
        do: function (data){
            _bg_color(this);
            return false;
        },
        onload: function (){
            var data_type = $.vpage.api.get_url_param("type");
            _bg_color(".item[data-type="+data_type+"]")
        },
        onpop: function (){
            var data_type = $.vpage.api.get_url_param("type");
            _bg_color(".item[data-type="+data_type+"]")
        }
        
    })

    $.vpage.listen();


})
</script>
</head>
<body>

    <a href="" class="item" data-type="news">最新消息</a>
    <a href="" class="item" data-type="about">關於</a>

</body>
</html>