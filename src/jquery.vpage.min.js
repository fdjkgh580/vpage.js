/*! jquery.vpage.js 2017-07-24 */
!function(a){var b,c="1.2.1";a.vpage={},a.vpage.storage={},a.vpage.is_listen=!1,a.vpage.api=new function(){this.is_set_listen=function(){return a.vpage.is_listen===!1?(console.log("vpage 還未設定 listen() "),!1):!0},this.check_param=function(c){try{if(c=a.extend({url_get_onload_key:"onload"},c),void 0!==c.url)throw"請勿指定參數 param.url";if(void 0===c.name)throw"請指定參數 param.name";if(void 0===c.event)throw"請指定參數 param.event";if(void 0===c["do"])throw"請指定參數 param.do";if(void 0===c.onload)throw"請指定參數 param.onload";if(void 0===c.onpop)throw"請指定參數 param.onpop";return b=c.url_get_onload_key,c}catch(d){return console.log("Error: "+d),!1}},this.auto_set_url=function(b,c){if("A"!=a(b).get(0).tagName)return!1;var d=a(b).attr("href");return a.vpage.set(c,"url",d),d},this.add_state=function(a){return a.state||(a.state={}),a.state.vpage_name=a.name,a.state},this.onload=function(){var c=a.vpage.get_url_param(b);if(c&&a.vpage.storage[c]){var d=a.vpage.storage[c];d.onload.call(d)}return a.vpage.api},this.onpop=function(){return window.onpopstate=function(b){if(history.state){var c=!1;if(a.each(a.vpage.storage,function(b,d){return c=a.vpage.get_url_param(d.url_get_onload_key),c?!1:void 0}),c){var d=a.vpage.storage[c];d.onpop.call(d)}else a.vpage["default"]()}else a.vpage["default"]()},a.vpage.api},this.push_state=function(b){var c=(b.name,{});if(b.state=a.vpage.api.add_state(b),c[b.name]=b.state,history.state)var d=a.extend(history.state,c);else var d=c;history.pushState(d,b.title,b.url)}},a.vpage.version=function(){return c},a.vpage.get_url_param=function(a){for(var b,c={},d=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),e=0;e<d.length;e++)b=d[e].split("="),c[b[0]]=b[1];return a?c[a]:c},a.vpage.listen=function(){a.vpage.is_listen=!0,a.vpage.api.onload.call(),a.vpage.api.onpop.call()},a.vpage.trigger=function(b,c){var d=a.vpage.storage[b];"onload"==c?d.onload.call(d):"onpop"==c&&d.onpop.call(d)},a.vpage.set=function(b,c,d){var e=a.vpage.storage[b];return e?void(a.vpage.storage[b][c]=d):(console.log("找不到指定的 vpage = "+b),!1)},a.vpage.get=function(b,c){if(!b)return a.vpage.storage;if(!c){var d=a.vpage.storage[b];return d?a.vpage.storage[b]:!1}return a.vpage.storage[b][c]},a.vpage["default"]=function(){},a.fn.vpage=function(b){b=a.vpage.api.check_param(b),a.vpage.storage[b.name]=b,history.state?history.state[b.name]||a.vpage.api.push_state(b):a.vpage.api.push_state(b);var c=void 0===b.parent?this:a(b.parent),d=void 0===b.child?!1:b.child;c.on(b.event,d,function(){return a.vpage.api.is_set_listen()===!1?!1:(a.vpage.api.auto_set_url(this,b.name),b.prepare&&b.prepare.call(this,b),a.vpage.api.push_state(b),b["do"]?b["do"].call(this,b):void 0)})}}(jQuery);
//# sourceMappingURL=jquery.vpage.min.js.map