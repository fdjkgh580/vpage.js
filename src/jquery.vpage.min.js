/*! jquery.vpage.js 2016-08-12 */
!function(a){var b="1.0.1";a.vpage={},a.vpage.storage={},a.vpage.is_listen=!1,a.vpage.api=new function(){this.is_set_listen=function(){return a.vpage.is_listen===!1?(console.log("vpage 還未設定 listen() "),!1):!0},this.check_param=function(a){try{if(void 0!==a.url)throw"請勿指定參數 param.url";if(void 0===a.name)throw"請指定參數 param.name";if(void 0===a.event)throw"請指定參數 param.event";if(void 0===a["do"])throw"請指定參數 param.do";if(void 0===a.onload)throw"請指定參數 param.onload";if(void 0===a.onpop)throw"請指定參數 param.onpop"}catch(b){return console.log("Error: "+b),!1}},this.auto_set_url=function(b,c){if("A"!=a(b).get(0).tagName)return!1;var d=a(b).attr("href");return a.vpage.set(c,"url",d),d},this.add_state=function(a){return a.state||(a.state={}),a.state.vpage_name=a.name,a.state},this.key=function(){return history.state.vpage_name},this.onload=function(){var b=a.vpage.get_url_param("onload");return b&&void 0!==a.vpage.storage[b]&&a.vpage.storage[b].onload(),a.vpage.api},this.onpop=function(){return window.onpopstate=function(b){if(history.state&&history.state.vpage_name){var c=a.vpage.api.key(),d=a.vpage.storage[c];d.onpop.call()}else console.log("System Error.")},a.vpage.api},this.push_state=function(b){b.state=a.vpage.api.add_state(b),history.pushState(b.state,b.title,b.url)}},a.vpage.version=function(){return b},a.vpage.get_url_param=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}},a.vpage.listen=function(){a.vpage.is_listen=!0,a.vpage.api.onload(),a.vpage.api.onpop()},a.vpage.trigger=function(b,c){"onload"==c?a.vpage.storage[b].onload():"onpop"==c&&a.vpage.storage[b].onpop()},a.vpage.set=function(b,c,d){a.vpage.storage[b][c]=d},a.vpage.get=function(b,c){return a.vpage.storage[b][c]},a.fn.vpage=function(b){a.vpage.api.check_param(b),a.vpage.storage[b.name]=b,a.vpage.api.push_state(b),this.on(b.event,function(){return a.vpage.api.is_set_listen()===!1?!1:(a.vpage.api.auto_set_url(this,b.name),b.prepare&&b.prepare.call(this,b),a.vpage.api.push_state(b),b["do"]?b["do"].call(this,b):void 0)})}}(jQuery);
//# sourceMappingURL=jquery.vpage.min.js.map