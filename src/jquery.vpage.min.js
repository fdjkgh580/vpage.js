/*! jquery.vpage.js 2016-08-18 */
!function(a){var b,c="1.1.0";a.vpage={},a.vpage.storage={},a.vpage.is_listen=!1,a.vpage.api=new function(){this.is_set_listen=function(){return a.vpage.is_listen===!1?(console.log("vpage 還未設定 listen() "),!1):!0},this.check_param=function(c){try{if(c=a.extend({vs:this,url_get_onload_key:"onload"},c),void 0!==c.url)throw"請勿指定參數 param.url";if(void 0===c.name)throw"請指定參數 param.name";if(void 0===c.event)throw"請指定參數 param.event";if(void 0===c["do"])throw"請指定參數 param.do";if(void 0===c.onload)throw"請指定參數 param.onload";if(void 0===c.onpop)throw"請指定參數 param.onpop";b=c.url_get_onload_key}catch(d){return console.log("Error: "+d),!1}},this.auto_set_url=function(b,c){if("A"!=a(b).get(0).tagName)return!1;var d=a(b).attr("href");return a.vpage.set(c,"url",d),d},this.add_state=function(a){return a.state||(a.state={}),a.state.vpage_name=a.name,a.state},this.key=function(a){var b=history.state[a].vpage_name;return b},this.onload=function(){var c=a.vpage.get_url_param(b);return c&&void 0!==a.vpage.storage[c]&&a.vpage.storage[c].onload(),a.vpage.api},this.onpop=function(){return window.onpopstate=function(b){if(history.state){console.log(history.state);var c=a.vpage.api.key(cky),d=a.vpage.storage[c];console.log(c),d.onpop.call()}else console.log("Default System")},a.vpage.api},this.push_state=function(b){var c=(b.name,{});b.state=a.vpage.api.add_state(b),c[b.name]=b.state,history.pushState(c,b.title,b.url)}},a.vpage.version=function(){return c},a.vpage.get_url_param=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}},a.vpage.listen=function(){a.vpage.is_listen=!0,a.vpage.api.onload(),a.vpage.api.onpop()},a.vpage.trigger=function(b,c){"onload"==c?a.vpage.storage[b].onload():"onpop"==c&&a.vpage.storage[b].onpop()},a.vpage.set=function(b,c,d){var e=a.vpage.storage[b];return void 0===e?(console.log("找不到指定的 vpage = "+b),!1):void(a.vpage.storage[b][c]=d)},a.vpage.get=function(b,c){if(void 0===b)return a.vpage.storage;if(void 0===c){var d=a.vpage.storage[b];return void 0===d?!1:a.vpage.storage[b]}return a.vpage.storage[b][c]},a.fn.vpage=function(b){a.vpage.api.check_param(b),a.vpage.storage[b.name]=b,null===history.state&&a.vpage.api.push_state(b),this.on(b.event,function(){return a.vpage.api.is_set_listen()===!1?!1:(a.vpage.api.auto_set_url(this,b.name),b.prepare&&b.prepare.call(this,b),a.vpage.api.push_state(b),b["do"]?b["do"].call(this,b):void 0)})}}(jQuery);
//# sourceMappingURL=jquery.vpage.min.js.map